# GE - 图形编辑器

## 模块概述

GE (Graphical Editor) 是OSATE2的图形化建模工具，提供了直观的可视化界面来创建、编辑和查看AADL架构模型。它使用现代化的图形技术栈，支持拖放操作、自动布局、实时验证等功能。

## 主要特性

### 1. 可视化建模
**功能**：
- 拖放式组件创建
- 图形化连接绘制
- 层次化视图
- 多图支持

**支持的元素**：
- 组件（Component）
- 特性（Feature）
- 连接（Connection）
- 流规范（Flow Specification）
- 模式（Mode）
- 子组件（Subcomponent）

### 2. 双向同步
**特性**：
- 图形视图 ↔ 文本视图同步
- 实时更新
- 多编辑器协同
- 一致性保证

### 3. 自动布局
**布局算法**：
- 层次化布局
- 增量布局
- 手动调整
- 对齐和分布

### 4. 导航和探索
**功能**：
- 大纲视图
- 层次导航
- 快速定位
- 过滤和搜索

## 技术架构

### 图形技术栈

#### 基础框架
根据pom.xml的配置，GE模块使用了e(fx)clipse技术：
- **JavaFX** - 现代化的Java图形框架
- **e(fx)clipse** - Eclipse和JavaFX的集成

#### 渲染引擎
- 矢量图形渲染
- 硬件加速
- 高性能更新

### 架构设计

#### MVC模式
```
Model (AADL模型)
  ↓
View (图形视图)
  ↓
Controller (编辑器控制器)
```

#### 分层架构
```
UI层 (用户交互)
  ↓
业务逻辑层 (编辑操作)
  ↓
模型层 (AADL EMF模型)
```

## 核心功能

### 1. 图表管理
**图表类型**：
- 包图（Package Diagram）
- 结构图（Structure Diagram）
- 类型图（Classifier Diagram）
- 实例图（Instance Diagram）

**图表操作**：
- 创建新图
- 重命名图
- 删除图
- 导入/导出图

### 2. 元素编辑
**创建操作**：
- 从调色板拖放
- 上下文菜单创建
- 快捷键创建
- 向导式创建

**修改操作**：
- 属性编辑
- 可视化移动
- 大小调整
- 样式定制

**删除操作**：
- 单个删除
- 批量删除
- 级联删除选项

### 3. 连接编辑
**连接类型**：
- 端口连接
- 访问连接
- 参数连接
- 特性组连接

**连接操作**：
- 智能端点识别
- 路径优化
- 弯曲点调整
- 连接验证

### 4. 层次化编辑
**导航**：
- 下钻（Drill Down）到子组件
- 上浮（Drill Up）到父组件
- 面包屑导航
- 快速跳转

**层次视图**：
- 展开/折叠
- 层次过滤
- 多层显示

### 5. 外观定制
**视觉样式**：
- 颜色主题
- 字体设置
- 图标选择
- 线条样式

**布局选项**：
- 网格对齐
- 自动间距
- 边距设置

## 用户交互

### 调色板 (Palette)
**分组**：
- 基本元素
- 组件类型
- 特性类型
- 连接类型
- 注释工具

**搜索**：
- 快速过滤
- 关键字搜索

### 属性面板
**显示内容**：
- 元素属性
- AADL属性
- 可视化属性
- 验证信息

**编辑方式**：
- 内联编辑
- 下拉选择
- 文本输入
- 引用浏览

### 大纲视图
**功能**：
- 树状结构
- 同步选择
- 快速导航
- 过滤显示

### 上下文菜单
**常用操作**：
- 创建元素
- 编辑属性
- 布局调整
- 验证检查
- 重构操作

## 高级特性

### 1. 模式可视化
**功能**：
- 模式切换视图
- 模式特定配置显示
- 模式转换可视化

### 2. 流可视化
**功能**：
- 流路径高亮
- 端到端流显示
- 流规范编辑

### 3. 实时验证
**功能**：
- 即时错误提示
- 警告标记
- 快速修复建议
- 验证结果显示

### 4. 重构支持
**操作**：
- 重命名
- 提取子组件
- 内联元素
- 移动元素

### 5. 模板和模式
**功能**：
- 组件模板
- 设计模式库
- 快速应用
- 自定义模板

## 性能优化

### 渲染优化
- 视口裁剪
- 增量渲染
- 缓存策略
- 延迟加载

### 大模型支持
- 虚拟化渲染
- 分页显示
- 按需加载
- 内存管理

## 导入导出

### 图像导出
**格式**：
- PNG
- SVG
- PDF
- JPEG

**选项**：
- 分辨率设置
- 背景透明
- 选区导出
- 批量导出

### 图表导入
- 从文本生成图
- 从实例生成图
- 模板导入

## 集成功能

### Eclipse集成
- 工作台集成
- 编辑器生命周期
- 保存策略
- 撤销/重做

### OSATE集成
- 与分析工具联动
- 分析结果可视化
- 实例图生成
- 错误标记显示

### 版本控制
- Git友好格式
- 合并支持
- 差异显示

## 扩展机制

### 自定义图形
- 自定义形状
- 自定义装饰器
- 自定义样式

### 自定义工具
- 自定义调色板项
- 自定义操作
- 自定义验证

## 可访问性

### 键盘导航
- 全键盘操作
- 快捷键支持
- Tab导航

### 缩放和平移
- 鼠标滚轮缩放
- 平移操作
- 缩放级别控制
- 适应窗口

## 用户体验

### 智能提示
- 类型建议
- 连接提示
- 命名建议
- 约束提示

### 错误处理
- 友好的错误消息
- 恢复建议
- 自动修复
- 撤销支持

### 性能反馈
- 进度指示
- 操作反馈
- 状态提示

## 应用场景

### 初学者
- 降低学习曲线
- 可视化理解
- 交互式探索

### 架构师
- 快速设计
- 原型构建
- 架构评审

### 文档制作
- 架构图生成
- 演示材料
- 设计文档

### 协作开发
- 团队沟通
- 设计讨论
- 代码评审

## 技术依赖

### 外部依赖
- Eclipse Platform
- JavaFX
- e(fx)clipse
- EMF (Eclipse Modeling Framework)

### OSATE依赖
- **core** - AADL核心模型
- 其他模块的可视化支持

## 配置选项

### 编辑器设置
- 默认布局算法
- 自动保存
- 网格设置
- 默认样式

### 性能设置
- 渲染质量
- 动画效果
- 缓存大小

## 已知限制

### 大规模模型
- 性能下降可能发生
- 建议使用过滤和分层

### 并发编辑
- 需要注意冲突
- 建议定期同步

## 未来发展

### 计划功能
- 更多布局算法
- 增强的可视化
- 更好的性能
- 触摸屏支持

## 下一步分析

- [ ] 深入研究JavaFX渲染机制
- [ ] 分析图形模型和AADL模型的映射
- [ ] 研究自动布局算法实现
- [ ] 探索自定义图形元素开发
- [ ] 分析性能优化策略
- [ ] 研究双向同步机制
- [ ] 探索扩展点和插件机制
- [ ] 分析与其他OSATE模块的集成方式
